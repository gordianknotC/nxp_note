
## Add Android Project Into Flutter
å¯¦éš›ç›®éŒ„çµæ§‹å¦‚ä¸‹åœ–
![structure](https://gordianknot1981.github.io/nxp_note/flutter/flutter_android_structure.png )

### Flutter/Android å°ˆæ¡ˆç›®éŒ„çµæ§‹èªªæ˜Ž

file structure of a flutter project would be look like this
- ðŸ“ FlutterProject
	- ðŸ“° pubspec.yaml 
	- ðŸ“ lib [1]
	- ðŸ“ android [2]
	- ðŸ“ res [3]
>[1]  libraries written in dart.
[2]  an android project wrapper for flutter, which contains following structure
> - ðŸ“ app
	- ðŸ“° build.gradle
	- ðŸ“° local.properties 
>- ðŸ“ res
>- ðŸ“ assets
>- ðŸ“° build.gradle
>- ðŸ“° settings.gradle
>
>[3] android resource folder for flutter project,  generated by flutter.

### èªªæ˜ŽAndroid Project wrapper for flutter
#### android project wrapper for flutter
- ðŸ“ app[^1]
	- ðŸ“ libs
	- ðŸ“ src
	- ðŸ“° build.gradle [^2]
- ðŸ“ res[^4]
- ðŸ“ assets[^5]
- ðŸ“° build.gradle[^6]
- ðŸ“° settings.gradle[^7]
- ðŸ“° local.properties [^8]

**[1] app** your existing android project 
 #### ç¾æœ‰çš„android project
 éœ€å°‡å…¶folderæ”¹åç‚ºappï¼Œappä¼¼ä¹Žç‚ºflutteré»˜èªçš„androidå°ˆæ¡ˆåç¨±ï¼Œä»¥å‘ŠçŸ¥flutterå°ˆæ¡ˆè¨­å®šçš„ä½ç½®(build.gradle, settings.gradle)ï¼Œå¦‚æžœä¸ç”¨é»˜èªçš„åç¨±ä¼¼ä¹Žä¹Ÿå¯ä»¥ï¼Œä½†éœ€è¦è¨­å®šproject.nameåŠinclude nameï¼Œå¾Œæ–‡æœƒå¯«åˆ°ã€‚

android project folder, this would be your existing android project renamed to "app".  "app" seems like a default naming convention for flutter to indicate project entry folder where configurations(build.gradle and local.properties) locates. For not using convention name, you need to setup project name and include name in build.gradle, which will refer later on.
 
 
**[2] build.gradle** ç¾æœ‰å°ˆæ¡ˆè¨­å®šæª”, build setup for existing android project
è‹¥è¦å°‡ç¾æœ‰å°ˆæ¡ˆèˆ‡flutteré€£çµ,éœ€åœ¨è©²è¨­å®šæª”ä¸­å¯«å…¥ä»¥ä¸‹è³‡è¨Š
- è¼‰å…¥local.properties
- flutterRoot 
- flutterProject
- apply pluginId **&** apply from
- sourceSets
- applicationId
- dependencies

> #### local.properties
> indicates where flutter.sdk and android.sdk locate.
```groovy
	def localProperties = new Properties()  
	def localPropertiesFile = rootProject.file('local.properties')  
	if (localPropertiesFile.exists()) {  
	    localPropertiesFile.withReader('UTF-8') { reader ->  
	        localProperties.load(reader)  
	    }  
	}
```
> ä¸»è¦è¨˜éŒ„äº†flutter.sdkåŠandroid.sdkçš„ä½ç½®, ä»‹ç”±è®€å– local.properties ä»¥æ³¨å…¥flutter
> - rootProject æŒ‡å‘ android , 
> - localPropertiesFile  æŒ‡å‘ android/local.properties

> #### flutterRoot
> read flutter sdk from local.properties into flutterRoot
```groovy
def flutterRoot = localProperties.getProperty('flutter.sdk')  
if (flutterRoot == null) {  
    throw new GradleException("Flutter SDK not found. Define location with flutter.sdk in the local.properties file.")  
}
```

> #### flutterProject
> specify where flutterProject locates, default value are "../.."
```groovy
def flutterProject = '../..'
flutter {  
    source flutterProject  
}
```

> #### apply plugin | apply from
> apply plugin pluginId implmented the plugin
> - apply plugin: pluginId
> - apply from: local or remote build script
```groovy
```
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE4ODk0NDQ0NjAsMTQ2MDMwODA1NCwxNT
YxMDIyMzI5LDgwMTI0MzI0NiwtMzY0NjgwMzIxLC0xOTM2NDc5
MjU1LC0xNzc0Njk2ODgyXX0=
-->